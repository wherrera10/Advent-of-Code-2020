#=
=={{header|Julia}}==
<lang julia>
One-time pad uses internet random source with rand() backup
=#
using HTTP

function getrandom()
    try
        txt = HTTP.get("https://www.random.org/cgi-bin/randbyte?nbytes=1024&format=hex").body
        bytes = map(s -> parse(UInt8, s), split(strip(txt), r"\s+"))
        if length(bytes) < 3100
            throw("not enough bytes gotten from internet")
        end
    catch y
        warn("internet source failure: $y")
        bytes = rand(UInt8, 3136)
    end
    x = rand(collect(1:25, 4))
    start, finish = x[1] + x[4], x[2] + x[3]
    bytes[start:finish]
end

function onetimepadfile(filename, nbytes)
    fp, needed = open(filename, "w"), nbytes
    while needed > 0
        data = getrandom()
        if length(data) >= needed
            data = data[1:needed]
        end
        needed -= write(fp, data)
    end
end



