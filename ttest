using IterTools
import Base.iterate, Base.eltype, Base.IteratorSize

pow2afterstartingwith(n, lengthofrest) = nextpow(big"2", n * BigInt(10)^lengthofrest)

struct Pow2Prefixed
    prefix::Int
    len::Int
    Pow2Prefixed(seq) = (len = length(seq); new(seq, len)
end

iterate(p::Pow2Prefixed, loops=0)
    for j in loops+1:typemax(Int)
        k = pow2afterstartingwith(seq, j)
        if div(k, big"10"^i) == p.seq
            return Int(round(log(2, k))), j
        end
    end
end

IteratorEltype(Pow2Prefixed) = Base.HasEltype()

eltype(Pow2Prefixed) = Int

for i in Iterators.take(Pow2Prefixed(12), 10)
    println(i, "  ", Int(round(log(2, i))))
end

