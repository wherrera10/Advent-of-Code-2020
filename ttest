
 
    isobstacle(x, y, environ) = (environ[x, y] == '\u' || )
nextobstaclex(pos, e) = (x = pos.x + 1; while(!isobstacle(x, pos.y, e) x += 1 end; x)

nearobs(b, e, delt=8) = any(x -> isobstacle(b.pos.x + x, b.pos.y, e), 1:delt)

function nearbyopen(b, e, opendist = 24)
    opendepths = [nextobstaclex(Point(b.pos.x, y) for y in 1:e.height]
    for dist in 0:e.height
        ydown, yup = b.pos.y - dist, b.pos.y + dist
        if opendist[ydown] == e.width || ydown > 0 && opendepths[ydown] > opendist
            return ydown
        elseif opendist[yup] == e.width || yup <= e.height && opendepths[ydown] > opendist
            return yup
    end
    dist, y = findmax(opendepths)
    return y
end

